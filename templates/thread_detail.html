{% extends 'base.html' %}
{% block title %}ثريد — Threadify{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-lg-8">
    <a href="{% url 'feed' %}" class="text-decoration-none text-secondary small"><i class="bi bi-arrow-right"></i> رجوع للرئيسية</a>

    <div class="mt-3">
      {% include 'partials/thread_card.html' with thread=thread show_link=False %}
    </div>

    <div class="card border-0 shadow-sm mt-3">
      <div class="card-body">
        <h2 class="h6 fw-bold mb-3">رد على الثريد</h2>
        <form method="post" enctype="multipart/form-data">
          {% csrf_token %}
          <div class="mb-2">
            {{ form.content }}
            {% if form.content.errors %}<div class="text-danger small">{{ form.content.errors }}</div>{% endif %}
          </div>
          <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
            <label class="btn btn-outline-secondary btn-sm mb-0">
              <i class="bi bi-image"></i> صورة
              {{ form.image }}
            </label>
            <button class="btn btn-primary btn-sm" type="submit"><i class="bi bi-reply"></i> رد</button>
          </div>
        </form>
      </div>
    </div>

    <div class="mt-4">
      <div class="d-flex align-items-center justify-content-between">
        <h3 class="h6 fw-bold mb-0">الردود ({{ thread.replies_count }})</h3>
      </div>

      {% for reply in replies %}
        {% include 'partials/thread_card.html' with thread=reply is_reply=True %}
      {% empty %}
        <div class="text-center text-secondary py-4">ما فيه ردود حتى الآن.</div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
